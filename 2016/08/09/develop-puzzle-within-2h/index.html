<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>挑战速度，2小时完成HTML5拼图小游戏 | Yorhom&#39;s Playground</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="初学lufylegend.js之日，我用lufylegend.js开发了第一个HTML5小游戏——拼图游戏，还写了篇博文来炫耀一下：HTML5小游戏《智力大拼图》发布，挑战你的思维风暴。不过当时初学游戏开发，经验浅薄，所以没有好好专研游戏里的算法和代码的缺陷，导致游戏出现了很多bug，甚至拼图打乱后很可能无法复原。最近经常有朋友问起这个游戏，希望我能把代码里的bug改一下方便初学者学习，顺便我也打">
<meta property="og:type" content="article">
<meta property="og:title" content="挑战速度，2小时完成HTML5拼图小游戏">
<meta property="og:url" content="http://yuehaowang.github.io/2016/08/09/develop-puzzle-within-2h/index.html">
<meta property="og:site_name" content="Yorhom's Playground">
<meta property="og:description" content="初学lufylegend.js之日，我用lufylegend.js开发了第一个HTML5小游戏——拼图游戏，还写了篇博文来炫耀一下：HTML5小游戏《智力大拼图》发布，挑战你的思维风暴。不过当时初学游戏开发，经验浅薄，所以没有好好专研游戏里的算法和代码的缺陷，导致游戏出现了很多bug，甚至拼图打乱后很可能无法复原。最近经常有朋友问起这个游戏，希望我能把代码里的bug改一下方便初学者学习，顺便我也打">
<meta property="og:image" content="http://yuehaowang.github.io/images/in_posts/my_puzzle_record.png">
<meta property="og:updated_time" content="2017-02-01T14:42:57.525Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="挑战速度，2小时完成HTML5拼图小游戏">
<meta name="twitter:description" content="初学lufylegend.js之日，我用lufylegend.js开发了第一个HTML5小游戏——拼图游戏，还写了篇博文来炫耀一下：HTML5小游戏《智力大拼图》发布，挑战你的思维风暴。不过当时初学游戏开发，经验浅薄，所以没有好好专研游戏里的算法和代码的缺陷，导致游戏出现了很多bug，甚至拼图打乱后很可能无法复原。最近经常有朋友问起这个游戏，希望我能把代码里的bug改一下方便初学者学习，顺便我也打">
    

    
        <link rel="alternate" href="atom.xml" title="Yorhom&#39;s Playground" type="application/atom+xml" />
    

    
        <link rel="icon" href="/favicon.png" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css" type="text/css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css" type="text/css">

    <link rel="stylesheet" href="/css/style.css" type="text/css">

    <script src="/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css" type="text/css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css" type="text/css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Yorhom&#39;s Playground</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/tags">标签</a>
                
                    <a class="main-nav-link" href="/showcase">作品展示</a>
                
                    <a class="main-nav-link" href="/about">关于我</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js" type="text/javascript"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签</a></td>
                
                    <td><a class="main-nav-link" href="/showcase">作品展示</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于我</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/images/avatar.png" />
            <h2 id="name">Yorhom</h2>
            <h3 id="title">A PROgramming Addict</h3>
            <span id="location"><i class="fa fa-map-marker"></i>中国 四川 成都</span>
            <a id="follow" target="_blank" href="https://weibo.com/yorhomwang/">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                11
                <span>文章</span>
            </div>
            <div class="article-info-block">
                14
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/yuehaowang/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="http://weibo.com/yorhomwang/" target="_blank" title="weibo" class=tooltip>
                            <i class="fa fa-weibo"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="http://twitter.com/yuehaowang/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-develop-puzzle-within-2h" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            挑战速度，2小时完成HTML5拼图小游戏
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2016/08/09/develop-puzzle-within-2h/">
            <time datetime="2016-08-08T16:00:00.000Z" itemprop="datePublished">2016-08-09</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/HTML5-JavaScript/">HTML5&JavaScript</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/HTML5/">HTML5</a>, <a class="tag-link" href="/tags/JavaScript/">JavaScript</a>, <a class="tag-link" href="/tags/canvas/">canvas</a>, <a class="tag-link" href="/tags/lufylegend/">lufylegend</a>, <a class="tag-link" href="/tags/游戏开发/">游戏开发</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>初学lufylegend.js之日，我用lufylegend.js开发了第一个HTML5小游戏——拼图游戏，还写了篇博文来炫耀一下：<a href="http://blog.csdn.net/yorhomwang/article/details/8546053" target="_blank" rel="external">HTML5小游戏《智力大拼图》发布，挑战你的思维风暴</a>。不过当时初学游戏开发，经验浅薄，所以没有好好专研游戏里的算法和代码的缺陷，导致游戏出现了很多bug，甚至拼图打乱后很可能无法复原。最近经常有朋友问起这个游戏，希望我能把代码里的bug改一下方便初学者学习，顺便我也打算测试一下自己写这种小游戏的速度，所以就抽出了一些时间将这个游戏从头到尾重新写了一遍，计算了一下用时，从准备、修改素材到最后完成游戏，一共用了大约2h的时间。</p>
<p>以下是游戏地址：</p>
<p><strong><a href="http://yuehaowang.github.io/games/puzzle/">http://yuehaowang.github.io/games/puzzle/</a></strong></p>
<p>这是我的游戏记录，欢迎各位挑战：</p>
<p><img src="/images/in_posts/my_puzzle_record.png" alt="我的纪录"></p>
<p>接下来就来讲讲如何开发完成这款游戏的。（按“编年体”）</p>
<a id="more"></a>
<h1 id="u51C6_u5907_u9636_u6BB5"><a href="#u51C6_u5907_u9636_u6BB5" class="headerlink" title="准备阶段"></a>准备阶段</h1><p>准备lufylegend游戏引擎，大家可以去官方网站下载：</p>
<p><a href="/lufylegend.com/lufylegend">lufylegend.com/lufylegend</a></p>
<p>引擎文档地址：</p>
<p><a href="/lufylegend.com/lufylegend/api">lufylegend.com/lufylegend/api</a></p>
<p>可以说，如果没有强大的lufylegend引擎，这种html5小游戏用原生canvas制作，少说要一天呢。</p>
<h1 id="0_uFF5E30min"><a href="#0_uFF5E30min" class="headerlink" title="0～30min"></a>0～30min</h1><p>准备素材（10min） + 修改素材（20min）。由于在下实在手残，不善于P图，修改图片用了大约20min，囧……</p>
<h1 id="30_uFF5E50min"><a href="#30_uFF5E50min" class="headerlink" title="30～50min"></a>30～50min</h1><p>开发开始界面。游戏不能没有开始界面所以我们首先实现这部分代码。在此之前是<code>index.html</code>里的代码，代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">title</span>&gt;</span>Puzzle<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span> <span class="attribute">content</span>=<span class="value">"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"./lib/lufylegend-1.10.1.simple.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"./js/Main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">style</span>=<span class="value">"margin: 0px; font-size: 0px; background: #F2F2F2;"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"mygame"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>主要是引入一些js文件，不多说。然后准备一个Main.js文件，在这个文件里添加初始化界面和加载资源的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 初始化游戏 */</span></span><br><span class="line">LInit(<span class="number">60</span>, <span class="string">"mygame"</span>, <span class="number">390</span>, <span class="number">580</span>, main);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> imgBmpd;</span><br><span class="line"><span class="comment">/** 游戏层 */</span></span><br><span class="line"><span class="keyword">var</span> stageLayer, gameLayer, overLayer;</span><br><span class="line"><span class="comment">/** 拼图块列表 */</span></span><br><span class="line"><span class="keyword">var</span> blockList;</span><br><span class="line"><span class="comment">/** 是否游戏结束 */</span></span><br><span class="line"><span class="keyword">var</span> isGameOver;</span><br><span class="line"><span class="comment">/** 用时 */</span></span><br><span class="line"><span class="keyword">var</span> startTime, time, timeTxt;</span><br><span class="line"><span class="comment">/** 步数 */</span></span><br><span class="line"><span class="keyword">var</span> steps, stepsTxt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">/** 全屏设置 */</span></span><br><span class="line">	<span class="keyword">if</span> (LGlobal.mobile) &#123;</span><br><span class="line">		LGlobal.stageScale = LStageScaleMode.SHOW_ALL;</span><br><span class="line">	&#125;</span><br><span class="line">	LGlobal.screen(LGlobal.FULL_SCREEN);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 添加加载提示 */</span></span><br><span class="line">	<span class="keyword">var</span> loadingHint = <span class="keyword">new</span> LTextField();</span><br><span class="line">	loadingHint.text = <span class="string">"资源加载中……"</span>;</span><br><span class="line">	loadingHint.size = <span class="number">20</span>;</span><br><span class="line">	loadingHint.x = (LGlobal.width - loadingHint.getWidth()) / <span class="number">2</span>;</span><br><span class="line">	loadingHint.y = (LGlobal.height - loadingHint.getHeight()) / <span class="number">2</span>;</span><br><span class="line">	addChild(loadingHint);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 加载图片 */</span></span><br><span class="line">	LLoadManage.load(</span><br><span class="line">		[</span><br><span class="line">			&#123;path : <span class="string">"./js/Block.js"</span>&#125;,</span><br><span class="line">			&#123;name : <span class="string">"img"</span>, path : <span class="string">"./images/img.jpg"</span>&#125;</span><br><span class="line">		],</span><br><span class="line">		<span class="literal">null</span>,</span><br><span class="line">		<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">			<span class="comment">/** 移除加载提示 */</span></span><br><span class="line">			loadingHint.remove();</span><br><span class="line"></span><br><span class="line">			<span class="comment">/** 保存位图数据，方便后续使用 */</span></span><br><span class="line">			imgBmpd = <span class="keyword">new</span> LBitmapData(result[<span class="string">"img"</span>]);</span><br><span class="line"></span><br><span class="line">			gameInit();</span><br><span class="line">		&#125;</span><br><span class="line">	);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gameInit</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">	<span class="comment">/** 初始化舞台层 */</span></span><br><span class="line">	stageLayer = <span class="keyword">new</span> LSprite();</span><br><span class="line">	stageLayer.graphics.drawRect(<span class="number">0</span>, <span class="string">""</span>, [<span class="number">0</span>, <span class="number">0</span>, LGlobal.width, LGlobal.height], <span class="literal">true</span>, <span class="string">"#EFEFEF"</span>);</span><br><span class="line">	addChild(stageLayer);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 初始化游戏层 */</span></span><br><span class="line">	gameLayer = <span class="keyword">new</span> LSprite();</span><br><span class="line">	stageLayer.addChild(gameLayer);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 初始化最上层 */</span></span><br><span class="line">	overLayer = <span class="keyword">new</span> LSprite();</span><br><span class="line">	stageLayer.addChild(overLayer);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 添加开始界面 */</span></span><br><span class="line">	addBeginningUI();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码有详细注释，大家可以对照引擎文档和注释进行阅读。有些全局变量会在以后的代码中使用，大家可以先忽略。接下来是<code>addBeginningUI</code>函数里的代码，用于实现开始界面：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addBeginningUI</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> beginningLayer = <span class="keyword">new</span> LSprite();</span><br><span class="line">	beginningLayer.graphics.drawRect(<span class="number">0</span>, <span class="string">""</span>, [<span class="number">0</span>, <span class="number">0</span>, LGlobal.width, LGlobal.height], <span class="literal">true</span>, <span class="string">"#EDEDED"</span>);</span><br><span class="line">	stageLayer.addChild(beginningLayer);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 游戏标题 */</span></span><br><span class="line">	<span class="keyword">var</span> title = <span class="keyword">new</span> LTextField();</span><br><span class="line">	title.text = <span class="string">"拼图游戏"</span>;</span><br><span class="line">	title.size = <span class="number">50</span>;</span><br><span class="line">	title.weight = <span class="string">"bold"</span>;</span><br><span class="line">	title.x = (LGlobal.width - title.getWidth()) / <span class="number">2</span>;</span><br><span class="line">	title.y = <span class="number">160</span>;</span><br><span class="line">	title.color = <span class="string">"#FFFFFF"</span>;</span><br><span class="line">	title.lineWidth = <span class="number">5</span>;</span><br><span class="line">	title.lineColor = <span class="string">"#000000"</span>;</span><br><span class="line">	title.stroke = <span class="literal">true</span>;</span><br><span class="line">	beginningLayer.addChild(title);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 开始游戏提示 */</span></span><br><span class="line">	<span class="keyword">var</span> hint = <span class="keyword">new</span> LTextField();</span><br><span class="line">	hint.text = <span class="string">"- 点击屏幕开始游戏 -"</span>;</span><br><span class="line">	hint.size = <span class="number">25</span>;</span><br><span class="line">	hint.x = (LGlobal.width - hint.getWidth()) / <span class="number">2</span>;</span><br><span class="line">	hint.y = <span class="number">370</span>;</span><br><span class="line">	beginningLayer.addChild(hint);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 开始游戏 */</span></span><br><span class="line">	beginningLayer.addEventListener(LMouseEvent.MOUSE_UP, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		beginningLayer.remove();</span><br><span class="line">		</span><br><span class="line">		startGame();</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到此，运行代码，得到我们的开始界面：</p>
<p><img src="/images/in_posts/puzzle_beginning_ui.png" alt="开始界面"></p>
<p>看到这个画面，其实我自己都想吐槽一下实在是太“朴素”了，囧……</p>
<p>不过我这次图个制作速度，所以还望各位看官海量。</p>
<h1 id="50_uFF5E90min"><a href="#50_uFF5E90min" class="headerlink" title="50～90min"></a>50～90min</h1><p>这40分钟的时间，是最关键时期，期间我们要完成整个游戏的主体部分。首先，我们需要用代码来实现以下过程：</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">初始化游戏界面数据（如游戏时间、所用步数）和显示一些UI部件（如图样）</span><br><span class="line">|</span><br><span class="line">-<span class="ruby">&gt; 获取随机的拼图块位置</span><br><span class="line"></span>|</span><br><span class="line">-<span class="ruby">&gt; 显示打乱后的拼图块</span></span><br></pre></td></tr></table></figure>
<p>我们将这些步骤做成一个个的函数方便我们统一调用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startGame</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	isGameOver = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 初始化时间和步数 */</span></span><br><span class="line">	startTime = (<span class="keyword">new</span> <span class="built_in">Date</span>()).getTime();</span><br><span class="line">	time = <span class="number">0</span>;</span><br><span class="line">	steps = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">/** 初始化拼图块列表 */</span></span><br><span class="line">	initBlockList();</span><br><span class="line">	<span class="comment">/** 打乱拼图 */</span></span><br><span class="line">	getRandomBlockList();</span><br><span class="line">	<span class="comment">/** 显示拼图 */</span></span><br><span class="line">	showBlock();</span><br><span class="line">	<span class="comment">/** 显示缩略图 */</span></span><br><span class="line">	showThumbnail();</span><br><span class="line">	<span class="comment">/** 显示时间 */</span></span><br><span class="line">	addTimeTxt();</span><br><span class="line">	<span class="comment">/** 显示步数 */</span></span><br><span class="line">	addStepsTxt();</span><br><span class="line"></span><br><span class="line">	stageLayer.addEventListener(LEvent.ENTER_FRAME, onFrame);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>函数一开始，我们把<code>isGameOver</code>变量设定为<code>false</code>代表游戏未结束，在后期的代码里，我们会看到这个变量的作用。接着我们初始化了用于表示时间和步数的<code>time</code>和<code>steps</code>这两个全局变量，另外初始化变量<code>startTime</code>的值用于后面计算游戏时间。<br>接下来，我们就要开始初始化拼图块了。见<code>initBlockList</code>里的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initBlockList</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	blockList = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line">		<span class="comment">/** 根据序号计算拼图块图片显示位置 */</span></span><br><span class="line">		<span class="keyword">var</span> y = (i / <span class="number">3</span>) &gt;&gt;&gt; <span class="number">0</span>, x = i % <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">		blockList.push(<span class="keyword">new</span> Block(i, x, y));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里我们使用了一个<code>Block</code>类，这个类用于显示拼图块和储存拼图块的数据，并提供了一些方法来操控拼图块，下面是其构造器的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Block</span> (<span class="params">index, x, y</span>) </span>&#123;</span><br><span class="line">	LExtends(<span class="keyword">this</span>, LSprite, []);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> bmpd = imgBmpd.clone();</span><br><span class="line">	bmpd.setProperties(x * <span class="number">130</span>, y * <span class="number">130</span>, <span class="number">130</span>, <span class="number">130</span>);</span><br><span class="line">	<span class="keyword">this</span>.bmp = <span class="keyword">new</span> LBitmap(bmpd);</span><br><span class="line">	<span class="keyword">this</span>.addChild(<span class="keyword">this</span>.bmp);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> border = <span class="keyword">new</span> LShape();</span><br><span class="line">	border.graphics.drawRect(<span class="number">3</span>, <span class="string">"#CCCCCC"</span>, [<span class="number">0</span>, <span class="number">0</span>, <span class="number">130</span>, <span class="number">130</span>]);</span><br><span class="line">	<span class="keyword">this</span>.addChild(border);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">this</span>.index = index;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">this</span>.addEventListener(LMouseEvent.MOUSE_UP, <span class="keyword">this</span>.onClick);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Block</code>类继承自<code>LSprite</code>，属于一个显示对象，所以我们在这个类中添加了一个位图对象用于显示拼图块对应的图片。除此之外，我们还为拼图块添加了一个边框，在显示时用于隔开周围的拼图块。<code>Block</code>类有一个<code>index</code>属性，代表拼图块在拼图块列表<code>blockList</code>中的正确位置。最后，我们为此类添加了一个鼠标按下事件，用于处理鼠标按下后移动图块操作。</p>
<p>接下来我们还要介绍这个类的一个方法<code>setLocation</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Block.prototype.setLocation = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.locationX = x;</span><br><span class="line">	<span class="keyword">this</span>.locationY = y;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">this</span>.x = x * <span class="number">130</span>;</span><br><span class="line">	<span class="keyword">this</span>.y = y * <span class="number">130</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这个方法用于设置拼图块对象的显示位置以及保存拼图块的“数组位置”。什么是“数组位置”呢？各位看官可以通过下面的图片加以了解：</p>
<p><img src="/images/in_posts/diagram_of_array_coordinate_in_puzzle_game.png" alt="图解“数组位置”"></p>
<p>可以看到，“数组位置”就类似于二维数组中的元素下标。储存这个位置的作用在于可以很方便地从<code>blockList</code>中获取到附近的其他拼图块。这个方法在我们显示拼图时有调用到，在显示拼图之前，我们得先打乱拼图，见如下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandomBlockList</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">/** 随机打乱拼图 */</span></span><br><span class="line">	blockList.sort(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0.5</span> - <span class="built_in">Math</span>.random();</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 计算逆序和 */</span></span><br><span class="line">	<span class="keyword">var</span> reverseAmount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = blockList.length; i &lt; l; i++) &#123;</span><br><span class="line">		<span class="keyword">var</span> currentBlock = blockList[i];</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> j = i + <span class="number">1</span>; j &lt; l; j++) &#123;</span><br><span class="line">			<span class="keyword">var</span> comparedBlock = blockList[j];</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (comparedBlock.index &lt; currentBlock.index) &#123;</span><br><span class="line">				reverseAmount++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 检测打乱后是否可还原 */</span></span><br><span class="line">	<span class="keyword">if</span> (reverseAmount % <span class="number">2</span> != <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="comment">/** 不合格，重新打乱 */</span></span><br><span class="line">		getRandomBlockList();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>打乱拼图部分直接用数组的<code>sort</code>方法进行随机打乱：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">blockList.sort(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0.5</span> - <span class="built_in">Math</span>.random();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>其实打乱算法有很多种，我这里采用最粗暴的方法，也就是随机打乱。这种算法简单是简单，坏在可能出现无法复原的现象。针对这个问题，就有配套的检测打乱后是否可还原的算法，具体的算法理论我借用<a href="http://blog.csdn.net/lufy_legend" target="_blank" rel="external">lufy大神</a>的评论：</p>
<blockquote>
<p>此类游戏能否还原关键是看它打乱后的逆序次数之和是否为偶数<br>假设你打乱后的数组中的每一个小图块为<code>obj0</code>，<code>obj1</code>，<code>obj2</code>，…它们打乱之前的序号分别为<code>obj0.num</code>，<code>obj1.num</code>…<br>接下来循环数组，<strong>如果前面元素的序号比此元素后某个元素的序号大，如<code>obj0.num &gt; obj1.num</code>或者<code>obj2.num &gt; obj4.num</code>就表示一个逆序</strong><br><strong>当全部的逆序之和为奇数时表示不可还原</strong>，重新打乱即可，打乱后重新检测，直到逆序之和为偶数为止</p>
</blockquote>
<p>举个例子，如果有一个数组为<code>[3, 4, 2, 1]</code>，那么里面3 2, 3 1, 2 4, 4 1, 2 1是逆序的，所以逆序数是5。</p>
<p>上面我给出的<code>getRandomBlockList</code>里的代码就是在实现打乱算法和检测是否可还原算法。</p>
<p>还有一种打乱方式，大家可以尝试尝试：和复原拼图一样，将空白块一步一步地与周围的拼图随机交换顺序。这个打乱算法较上一种而言，不会出现无法复原的现象，而且可以根据打乱的步数设定游戏难度。</p>
<p>在完成打乱拼图块后，如期而至的是显示拼图块：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showBlock</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = blockList.length; i &lt; l; i++) &#123;</span><br><span class="line">		<span class="keyword">var</span> b = blockList[i];</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** 根据序号计算拼图块位置 */</span></span><br><span class="line">		<span class="keyword">var</span> y = (i / <span class="number">3</span>) &gt;&gt;&gt; <span class="number">0</span>, x = i % <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">		b.setLocation(x, y);</span><br><span class="line"></span><br><span class="line">		gameLayer.addChild(b);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>显示了拼图块后，我们要做的就是添加操作拼图块的功能。于是需要拓展<code>Block</code>类，为其添加事件监听器<code>onClick</code>方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">Block.prototype.onClick = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> self = e.currentTarget;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (isGameOver) &#123;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> checkList = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 判断右侧是否有方块 */</span></span><br><span class="line">	<span class="keyword">if</span> (self.locationX &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		checkList.push(Block.getBlock(self.locationX - <span class="number">1</span>, self.locationY));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 判断左侧是否有方块 */</span></span><br><span class="line">	<span class="keyword">if</span> (self.locationX &lt; <span class="number">2</span>) &#123;</span><br><span class="line">		checkList.push(Block.getBlock(self.locationX + <span class="number">1</span>, self.locationY));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 判断上方是否有方块 */</span></span><br><span class="line">	<span class="keyword">if</span> (self.locationY &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		checkList.push(Block.getBlock(self.locationX, self.locationY - <span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 判断下方是否有方块 */</span></span><br><span class="line">	<span class="keyword">if</span> (self.locationY &lt; <span class="number">2</span>) &#123;</span><br><span class="line">		checkList.push(Block.getBlock(self.locationX, self.locationY + <span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = checkList.length; i &lt; l; i++) &#123;</span><br><span class="line">		<span class="keyword">var</span> checkO = checkList[i];</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** 判断是否是空白拼图块 */</span></span><br><span class="line">		<span class="keyword">if</span> (checkO.index == <span class="number">8</span>) &#123;</span><br><span class="line">			steps++;</span><br><span class="line">			updateStepsTxt();</span><br><span class="line">			</span><br><span class="line">			Block.exchangePosition(self, checkO);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>首先，我们在这里看到了<code>isGameOver</code>全局变量的作用，即在游戏结束后，阻断点击拼图块后的操作。</p>
<p>在点击了拼图块后，我们先获取该拼图块周围的拼图块，并将它们装入<code>checkList</code>，再遍历<code>checkList</code>，当判断到周围有空白拼图块后，即周围有<code>index</code>属性等于8的拼图块后，先更新操作步数，然后将这两个拼图块交换位置。具体交换拼图块位置的方法详见如下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Block.exchangePosition = <span class="function"><span class="keyword">function</span> (<span class="params">b1, b2</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> b1x = b1.locationX, b1y = b1.locationY,</span><br><span class="line">		b2x = b2.locationX, b2y = b2.locationY,</span><br><span class="line">		b1Index = b1y * <span class="number">3</span> + b1x,</span><br><span class="line">		b2Index = b2y * <span class="number">3</span> + b2x;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 在地图块数组中交换两者位置 */</span></span><br><span class="line">	blockList.splice(b1Index, <span class="number">1</span>, b2);</span><br><span class="line">	blockList.splice(b2Index, <span class="number">1</span>, b1);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 交换两者显示位置 */</span></span><br><span class="line">	b1.setLocation(b2x, b2y);</span><br><span class="line">	b2.setLocation(b1x, b1y);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 判断游戏是否结束 */</span></span><br><span class="line">	Block.isGameOver();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>还有就是<code>Block.getBlock</code>静态方法，用于获取给定的“数组位置”下的拼图块：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Block.getBlock = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> blockList[y * <span class="number">3</span> + x];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在<code>Block.exchangePosition</code>中，我们通过<code>Block.isGameOver</code>判断玩家是否已将拼图复原：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Block.isGameOver = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> reductionAmount = <span class="number">0</span>, l = blockList.length;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 计算还原度 */</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; l; i++) &#123;</span><br><span class="line">		<span class="keyword">var</span> b = blockList[i];</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (b.index == i) &#123;</span><br><span class="line">			reductionAmount++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 计算是否完全还原 */</span></span><br><span class="line">	<span class="keyword">if</span> (reductionAmount == l) &#123;</span><br><span class="line">		<span class="comment">/** 游戏结束 */</span></span><br><span class="line">		gameOver();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>到这里，我们就实现了打乱和操作拼图块部分。</p>
<h1 id="90_uFF5E120min"><a href="#90_uFF5E120min" class="headerlink" title="90～120min"></a>90～120min</h1><p>最后30min用于细枝末节上的处理，如显示拼图缩略图、显示&amp;更新时间和步数，以及添加游戏结束画面，这些就交给如下冗长而简单的代码来完成吧：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showThumbnail</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> thumbnail = <span class="keyword">new</span> LBitmap(imgBmpd);</span><br><span class="line">	thumbnail.scaleX = <span class="number">130</span> / imgBmpd.width;</span><br><span class="line">	thumbnail.scaleY = <span class="number">130</span> / imgBmpd.height;</span><br><span class="line">	thumbnail.x = (LGlobal.width - <span class="number">100</span>) /<span class="number">2</span>;</span><br><span class="line">	thumbnail.y = <span class="number">410</span>;</span><br><span class="line">	overLayer.addChild(thumbnail);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTimeTxt</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	timeTxt = <span class="keyword">new</span> LTextField();</span><br><span class="line">	timeTxt.stroke = <span class="literal">true</span>;</span><br><span class="line">	timeTxt.lineWidth = <span class="number">3</span>;</span><br><span class="line">	timeTxt.lineColor = <span class="string">"#54D9EF"</span>;</span><br><span class="line">	timeTxt.color = <span class="string">"#FFFFFF"</span>;</span><br><span class="line">	timeTxt.size = <span class="number">18</span>;</span><br><span class="line">	timeTxt.x = <span class="number">20</span>;</span><br><span class="line">	timeTxt.y = <span class="number">450</span>;</span><br><span class="line">	overLayer.addChild(timeTxt);</span><br><span class="line"></span><br><span class="line">	updateTimeTxt();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateTimeTxt</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	timeTxt.text = <span class="string">"时间："</span> + getTimeTxt(time);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTimeTxt</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(time);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> d.getMinutes() + <span class="string">" : "</span> + d.getSeconds();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addStepsTxt</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	stepsTxt = <span class="keyword">new</span> LTextField();</span><br><span class="line">	stepsTxt.stroke = <span class="literal">true</span>;</span><br><span class="line">	stepsTxt.lineWidth = <span class="number">3</span>;</span><br><span class="line">	stepsTxt.lineColor = <span class="string">"#54D9EF"</span>;</span><br><span class="line">	stepsTxt.color = <span class="string">"#FFFFFF"</span>;</span><br><span class="line">	stepsTxt.size = <span class="number">18</span>;</span><br><span class="line">	stepsTxt.y = <span class="number">450</span>;</span><br><span class="line">	overLayer.addChild(stepsTxt);</span><br><span class="line"></span><br><span class="line">	updateStepsTxt();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateStepsTxt</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	stepsTxt.text = <span class="string">"步数："</span> + steps;</span><br><span class="line"></span><br><span class="line">	stepsTxt.x = LGlobal.width - stepsTxt.getWidth() - <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onFrame</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (isGameOver) &#123;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取当前时间 */</span></span><br><span class="line">	<span class="keyword">var</span> currentTime = (<span class="keyword">new</span> <span class="built_in">Date</span>()).getTime();</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 计算使用的时间并更新时间显示 */</span></span><br><span class="line">	time = currentTime - startTime;</span><br><span class="line">	updateTimeTxt();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gameOver</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	isGameOver = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> resultLayer = <span class="keyword">new</span> LSprite();</span><br><span class="line">	resultLayer.filters = [<span class="keyword">new</span> LDropShadowFilter()];</span><br><span class="line">	resultLayer.graphics.drawRoundRect(<span class="number">3</span>, <span class="string">"#BBBBBB"</span>, [<span class="number">0</span>, <span class="number">0</span>, <span class="number">350</span>, <span class="number">350</span>, <span class="number">5</span>], <span class="literal">true</span>,<span class="string">"#DDDDDD"</span>);</span><br><span class="line">	resultLayer.x = (LGlobal.width - resultLayer.getWidth()) / <span class="number">2</span>;</span><br><span class="line">	resultLayer.y = LGlobal.height / <span class="number">2</span>;</span><br><span class="line">	resultLayer.alpha = <span class="number">0</span>;</span><br><span class="line">	overLayer.addChild(resultLayer);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> title = <span class="keyword">new</span> LTextField();</span><br><span class="line">	title.text = <span class="string">"游戏通关"</span></span><br><span class="line">	title.weight = <span class="string">"bold"</span>;</span><br><span class="line">	title.stroke = <span class="literal">true</span>;</span><br><span class="line">	title.lineWidth = <span class="number">3</span>;</span><br><span class="line">	title.lineColor = <span class="string">"#555555"</span>;</span><br><span class="line">	title.size = <span class="number">30</span>;</span><br><span class="line">	title.color = <span class="string">"#FFFFFF"</span>;</span><br><span class="line">	title.x = (resultLayer.getWidth() - title.getWidth()) / <span class="number">2</span>;</span><br><span class="line">	title.y = <span class="number">30</span>;</span><br><span class="line">	resultLayer.addChild(title);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> usedTimeTxt = <span class="keyword">new</span> LTextField();</span><br><span class="line">	usedTimeTxt.text = <span class="string">"游戏用时："</span> + getTimeTxt(time);</span><br><span class="line">	usedTimeTxt.size = <span class="number">20</span>;</span><br><span class="line">	usedTimeTxt.stroke = <span class="literal">true</span>;</span><br><span class="line">	usedTimeTxt.lineWidth = <span class="number">2</span>;</span><br><span class="line">	usedTimeTxt.lineColor = <span class="string">"#555555"</span>;</span><br><span class="line">	usedTimeTxt.color = <span class="string">"#FFFFFF"</span>;</span><br><span class="line">	usedTimeTxt.x = (resultLayer.getWidth() - usedTimeTxt.getWidth()) / <span class="number">2</span>;</span><br><span class="line">	usedTimeTxt.y = <span class="number">130</span>;</span><br><span class="line">	resultLayer.addChild(usedTimeTxt);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> usedStepsTxt = <span class="keyword">new</span> LTextField();</span><br><span class="line">	usedStepsTxt.text = <span class="string">"所用步数："</span> + steps;</span><br><span class="line">	usedStepsTxt.size = <span class="number">20</span>;</span><br><span class="line">	usedStepsTxt.stroke = <span class="literal">true</span>;</span><br><span class="line">	usedStepsTxt.lineWidth = <span class="number">2</span>;</span><br><span class="line">	usedStepsTxt.lineColor = <span class="string">"#555555"</span>;</span><br><span class="line">	usedStepsTxt.color = <span class="string">"#FFFFFF"</span>;</span><br><span class="line">	usedStepsTxt.x = usedTimeTxt.x;</span><br><span class="line">	usedStepsTxt.y = <span class="number">180</span>;</span><br><span class="line">	resultLayer.addChild(usedStepsTxt);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> hintTxt = <span class="keyword">new</span> LTextField();</span><br><span class="line">	hintTxt.text = <span class="string">"- 点击屏幕重新开始 -"</span>;</span><br><span class="line">	hintTxt.size = <span class="number">23</span>;</span><br><span class="line">	hintTxt.stroke = <span class="literal">true</span>;</span><br><span class="line">	hintTxt.lineWidth = <span class="number">2</span>;</span><br><span class="line">	hintTxt.lineColor = <span class="string">"#888888"</span>;</span><br><span class="line">	hintTxt.color = <span class="string">"#FFFFFF"</span>;</span><br><span class="line">	hintTxt.x = (resultLayer.getWidth() - hintTxt.getWidth()) / <span class="number">2</span>;</span><br><span class="line">	hintTxt.y = <span class="number">260</span>;</span><br><span class="line">	resultLayer.addChild(hintTxt);</span><br><span class="line"></span><br><span class="line">	LTweenLite.to(resultLayer, <span class="number">0.5</span>, &#123;</span><br><span class="line">		alpha : <span class="number">0.7</span>,</span><br><span class="line">		y : (LGlobal.height - resultLayer.getHeight()) / <span class="number">2</span>,</span><br><span class="line">		onComplete : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="comment">/** 点击界面重新开始游戏 */</span></span><br><span class="line">			stageLayer.addEventListener(LMouseEvent.MOUSE_UP, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">				gameLayer.removeAllChild();</span><br><span class="line">				overLayer.removeAllChild();</span><br><span class="line"></span><br><span class="line">				stageLayer.removeAllEventListener();</span><br><span class="line"></span><br><span class="line">				startGame();</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ok，2h下来，整个游戏就搞定咯～不得不表扬一下lufylegend这个游戏引擎，实在是可以大幅提升开发效率。</p>
<h1 id="u6E90_u4EE3_u7801_u4E0B_u8F7D"><a href="#u6E90_u4EE3_u7801_u4E0B_u8F7D" class="headerlink" title="源代码下载"></a>源代码下载</h1><p>最后奉上源代码：</p>
<h3 id="u70B9_u51FB_u4E0B_u8F7D"><a href="#u70B9_u51FB_u4E0B_u8F7D" class="headerlink" title="点击下载"></a><a href="/downloads/puzzle.zip">点击下载</a></h3><h1 id="u81F4_u8C22_u4E0E_u53CD_u601D"><a href="#u81F4_u8C22_u4E0E_u53CD_u601D" class="headerlink" title="致谢与反思"></a>致谢与反思</h1><p>这篇博文在最初写成的时候，我没有对逆序算法进行深入研究，再加上我的测试不仔细，我没有发现算法的错误之处。因此，在博文发布后，不少读者发现游戏无解现象并将此问题反馈给了我，经过网友热心帮助，我才找到了问题所在，并更正了算法。在此对这些热心的网友表示真心的感谢，也为我学习不深入，以及误导了不少读者而感到十分内疚自责。</p>
<p><strong>如果大家对本文有任何意见或不解，欢迎留言～</strong></p>





	<div style="margin-top: 60px; padding-left: 10px; padding-top: 20px; padding-bottom: 20px; background: #F9F9F9; border-left: 3px orangered solid;">
		<b style="display: block; height: 30px;">版权声明：本文为博主原创文章，转载请注明出处</b>
		<a href="http://yuehaowang.github.io/2016/08/09/develop-puzzle-within-2h/">http://yuehaowang.github.io/2016/08/09/develop-puzzle-within-2h/</a>
	</div>




        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yuehaowang.github.io/2016/08/09/develop-puzzle-within-2h/" data-id="ciymz75gs001z39fzzwsj7vq2" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://yuehaowang.github.io/2016/08/09/develop-puzzle-within-2h/#comments" class="article-comment-link ds-thread-count" data-thread-key="http://yuehaowang.github.io/2016/08/09/develop-puzzle-within-2h/">评论</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2016/12/25/new-game-flying-stone/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    圣诞新作Flying Stone发布
                
            </div>
        </a>
    
    
        <a href="/2016/07/22/counting-principle-algorithm/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">算法研究：利用Python解决数学计数原理问题</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div class="ds-thread" data-thread-key="2016/08/09/develop-puzzle-within-2h/" data-title="挑战速度，2小时完成HTML5拼图小游戏" data-url="http://yuehaowang.github.io/2016/08/09/develop-puzzle-within-2h/"></div>
    <style>
        #ds-thread #ds-reset .ds-textarea-wrapper {
            background: none;
        }
        #ds-reset .ds-avatar img {
            box-shadow: none;
        }
        #ds-reset .ds-gradient-bg {
            background: #f7f7f7;
        }
        #ds-thread #ds-reset li.ds-tab a {
            border-radius: 3px;
        }
        #ds-thread #ds-reset .ds-post-button {
            color: white;
            border: none;
            box-shadow: none;
            background: #d32;
            text-shadow: none;
            font-weight: normal;
            font-family: 'Microsoft Yahei';
        }
        #ds-thread #ds-reset .ds-post-button:hover {
            color: white;
            background: #DE594C;
        }
        #ds-thread #ds-reset .ds-post-button:active {
            background: #d32;
        }
        #ds-smilies-tooltip ul.ds-smilies-tabs li a.ds-current {
            color: white;
            background: #d32;
            box-shadow: none;
            text-shadow: none;
            font-weight: normal;
        }
    </style>

    
    </section>


</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/01/31/sat-explanation/" class="thumbnail">
    
    
        <span style="background-image:url(/images/in_posts/sat_1.jpg)" alt="【译】碰撞检测之分离轴定理算法讲解" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/译文/">译文</a></p>
                            <p class="item-title"><a href="/2017/01/31/sat-explanation/" class="title">【译】碰撞检测之分离轴定理算法讲解</a></p>
                            <p class="item-date"><time datetime="2017-01-30T16:00:00.000Z" itemprop="datePublished">2017-01-31</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/12/25/new-game-flying-stone/" class="thumbnail">
    
    
        <span style="background-image:url(/images/demo/flying_stone_poster.png)" alt="圣诞新作Flying Stone发布" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/App发布/">App发布</a></p>
                            <p class="item-title"><a href="/2016/12/25/new-game-flying-stone/" class="title">圣诞新作Flying Stone发布</a></p>
                            <p class="item-date"><time datetime="2016-12-24T16:00:00.000Z" itemprop="datePublished">2016-12-25</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/09/develop-puzzle-within-2h/" class="thumbnail">
    
    
        <span style="background-image:url(/images/in_posts/my_puzzle_record.png)" alt="挑战速度，2小时完成HTML5拼图小游戏" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/HTML5-JavaScript/">HTML5&JavaScript</a></p>
                            <p class="item-title"><a href="/2016/08/09/develop-puzzle-within-2h/" class="title">挑战速度，2小时完成HTML5拼图小游戏</a></p>
                            <p class="item-date"><time datetime="2016-08-08T16:00:00.000Z" itemprop="datePublished">2016-08-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/07/22/counting-principle-algorithm/" class="thumbnail">
    
    
        <span style="background-image:url(/images/in_posts/picture_of_couting_principle_math_question.jpg)" alt="算法研究：利用Python解决数学计数原理问题" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Python/">Python</a></p>
                            <p class="item-title"><a href="/2016/07/22/counting-principle-algorithm/" class="title">算法研究：利用Python解决数学计数原理问题</a></p>
                            <p class="item-date"><time datetime="2016-07-21T16:00:00.000Z" itemprop="datePublished">2016-07-22</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/05/21/derivative-of-sinx/" class="thumbnail">
    
    
        <span style="background-image:url(/images/in_posts/derivative_of_sinx1.png)" alt="证明：sin&#39;x = cosx" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/其他/">其他</a></p>
                            <p class="item-title"><a href="/2016/05/21/derivative-of-sinx/" class="title">证明：sin&#39;x = cosx</a></p>
                            <p class="item-date"><time datetime="2016-05-20T16:00:00.000Z" itemprop="datePublished">2016-05-21</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/App发布/">App发布</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML5-JavaScript/">HTML5&JavaScript</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/其他/">其他</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/译文/">译文</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/App/" style="font-size: 12.5px;">App</a> <a href="/tags/HTML5/" style="font-size: 17.5px;">HTML5</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/Pylash/" style="font-size: 10px;">Pylash</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/canvas/" style="font-size: 17.5px;">canvas</a> <a href="/tags/lufylegend/" style="font-size: 17.5px;">lufylegend</a> <a href="/tags/其他/" style="font-size: 10px;">其他</a> <a href="/tags/数学/" style="font-size: 17.5px;">数学</a> <a href="/tags/游戏开发/" style="font-size: 15px;">游戏开发</a> <a href="/tags/物理模拟/" style="font-size: 10px;">物理模拟</a> <a href="/tags/算法/" style="font-size: 12.5px;">算法</a> <a href="/tags/译文/" style="font-size: 10px;">译文</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io/">Hexo</a>
                    </li>
                
                    <li>
                        <a href="http://lufylegend.com/">lufylegend</a>
                    </li>
                
                    <li>
                        <a href="http://www.ladeng6666.com/blog/">ladeng6666</a>
                    </li>
                
                    <li>
                        <a href="http://www.liaoxuefeng.com/">廖雪峰的官方网站</a>
                    </li>
                
                    <li>
                        <a href="http://www.xsec.io/">Netxfly&#39;s Blog</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 Yorhom<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'yuehaowang'};
    (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js" type="text/javascript"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js" type="text/javascript"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js" type="text/javascript"></script>

    </div>
</body>
</html>